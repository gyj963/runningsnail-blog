
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>项目总结温故知新 - web前端类 | Running_snail&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="running_snail">
    
    <meta name="description" content="这是我对自己曾经做过的比较大的东西的大概梳理(小东西，以后我会自己注意整理，每做完就整理)，写给自己的，记录的东西可能良莠不齐。如果路过的小伙伴有兴趣，也欢迎来指导。^ ^
以前做东西，基本不会总结写什么东西，而我记性又差（我总觉得自己像只只有七秒记忆的鱼，很多东西很快就忘记），所以导致之前做过的东">
    
    
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="running_snail1" />
    <meta name="twitter:title" content="项目总结温故知新 - web前端类 | Running_snail&#39;s Blog" />
      
    
    
    <link rel="alternative" href="http://snailsky.me/atom.xml" title="Running_snail&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/snail.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/luoxiaohei.png" alt="Running_snail&#39;s Blog" title="Running_snail&#39;s Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Running_snail&#39;s Blog">Running_snail&#39;s Blog</a></h1>
				<h2 class="blog-motto">Some notes about Web Front-End and others</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/timeline">时光机</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:snailsky.me">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/10/02/项目总结温故知新-web前端类/" title="项目总结温故知新 - web前端类" itemprop="url">项目总结温故知新 - web前端类</a>
  </h1>
  <p class="article-author">By
    
      <a href="https://plus.google.com/104285874726961350000?rel=author" title="running_snail" target="_blank" itemprop="author">running_snail</a>
    </p>
  <p class="article-time">
    <time datetime="2014-10-02T05:44:12.000Z" itemprop="datePublished">10月 2 2014</time>
    更新日期:<time datetime="2014-10-05T17:17:06.000Z" itemprop="dateModified">10月 6 2014</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#可视化编辑器"><span class="toc-number">1.</span> <span class="toc-text">可视化编辑器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#为什么用Node？"><span class="toc-number">1.1.</span> <span class="toc-text">为什么用Node？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动项目"><span class="toc-number">1.2.</span> <span class="toc-text">启动项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用MongoDB(mongoose)存储"><span class="toc-number">1.3.</span> <span class="toc-text">使用MongoDB(mongoose)存储</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Angular的视图、控制器和指令。"><span class="toc-number">1.4.</span> <span class="toc-text">Angular的视图、控制器和指令。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iframe子页面用了jQuery来做DOM操作"><span class="toc-number">1.5.</span> <span class="toc-text">iframe子页面用了jQuery来做DOM操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模块化的写法"><span class="toc-number">1.6.</span> <span class="toc-text">模块化的写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关于拖拽"><span class="toc-number">1.7.</span> <span class="toc-text">关于拖拽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#打包压缩怎么做？"><span class="toc-number">1.8.</span> <span class="toc-text">打包压缩怎么做？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他"><span class="toc-number">1.9.</span> <span class="toc-text">其他</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参与某移动web框架的开发"><span class="toc-number">2.</span> <span class="toc-text">参与某移动web框架的开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#滚动焦点图"><span class="toc-number">2.1.</span> <span class="toc-text">滚动焦点图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#标题下拉框"><span class="toc-number">2.2.</span> <span class="toc-text">标题下拉框</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#加载中动画"><span class="toc-number">2.3.</span> <span class="toc-text">加载中动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#柱形图"><span class="toc-number">2.4.</span> <span class="toc-text">柱形图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java_web系列项目小结"><span class="toc-number">3.</span> <span class="toc-text">Java web系列项目小结</span></a></li></ol>
		</div>
		
		<p>这是我对自己曾经做过的比较大的东西的大概梳理(小东西，以后我会自己注意整理，每做完就整理)，写给自己的，记录的东西可能良莠不齐。如果路过的小伙伴有兴趣，也欢迎来指导。^ ^</p>
<p>以前做东西，基本不会总结写什么东西，而我记性又差（我总觉得自己像只只有七秒记忆的鱼，很多东西很快就忘记），所以导致之前做过的东西，只能记得个大概，细节什么的如果不看代码就完全忘了。<br>以前做东西的风格比较狂放，通常不会考虑太多，有很多时候因为时间紧张，当时很感兴趣的东西，也没有太多时间来深入学习，通常是完成功能就OK了，然后过了一阵子自己也就忘记要深入学习这样一个东西这件事了。</p>
<p>现在的我知道总结有多么重要，也明白以前会的那么多东西，现在记不得多少的痛苦。“出来混总是要还的”，作为补偿吧，我将把曾经做过的东西全部梳理一遍(这完全是个体力活，以后再不敢做完东西不总结了…)，把我现在仍然觉得有价值的东西，需要记录的东西梳理一下。希望看到我以前的代码看到自己的不足，如果现在来做我有什么更好的解决方法吗？</p>
<hr>
<h2 id="可视化编辑器">可视化编辑器</h2>
<p><strong>目的</strong>：可拖拽的可视化编辑器，所见即所得，配置组件属性，存储当前版本，历史版本管理，压缩下载。<br><strong>技术</strong>：Node.js（express）+AngularJS+MongoDB（mongoose）+Javascript模块化+HTML5本地存储<br><strong>意义</strong>：第一次接触Node.js、AngularJS、MongoDB，边学边写，收获颇丰，从界面到代码，每个细节均要自己设计并实现，锻炼设计架构能力。虽然做的不是特别完美，过程中学到的这些东西是无价之宝。</p>
<h3 id="为什么用Node？">为什么用Node？</h3>
<p>Node的特点：异步I/O、事件与回调函数、单线程、跨平台。<br>Node的应用场景：I/O密集型、合理调度可擅长CPU密集型业务、与遗留系统和平共处、分布式应用<br>好吧，我坦白，其实是好奇js也能写后台这回事，而且写了比较久的Java也挺无聊的。</p>
<h3 id="启动项目">启动项目</h3>
<p>app.js(Node.js启动文件)<br><strong>目的</strong>：使用Node.js构造了一个服务器，引入了一些需要的包，配置路由等。<br><strong>总结</strong>：现在就记得当时在加入一些东西时在顺序方面试了很久，有些东西是必须要在某些东西前的。</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> express = <span class="keyword">require</span>(<span class="string">'express'</span>)</div><div class="line"> , user = <span class="keyword">require</span>(<span class="string">'./routes/routes_user'</span>) <span class="comment">//user的controller</span></div><div class="line"> , version = <span class="keyword">require</span>(<span class="string">'./routes/routes_version'</span>) <span class="comment">//version的controller</span></div><div class="line">    , path = <span class="keyword">require</span>(<span class="string">'path'</span>)</div><div class="line">    , ejs = <span class="keyword">require</span>(<span class="string">'ejs'</span>)</div><div class="line"> , http = <span class="keyword">require</span>(<span class="string">'http'</span>)</div><div class="line"> , fs = <span class="keyword">require</span>(<span class="string">'fs'</span>) <span class="comment">//文件操作</span></div><div class="line"> ,file_system = <span class="keyword">require</span>(<span class="string">'fs'</span>)</div><div class="line"> ,archiver = <span class="keyword">require</span>(<span class="string">'archiver'</span>) <span class="comment">//用于压缩</span></div><div class="line"> , SessionStore = <span class="keyword">require</span>(<span class="string">"session-mongoose"</span>)(express);</div><div class="line"></div><div class="line"><span class="keyword">var</span> store = <span class="keyword">new</span> SessionStore({</div><div class="line">                              url: <span class="string">"mongodb://localhost/session"</span>,</div><div class="line">                              interval: <span class="number">120000</span> <span class="comment">// expiration check worker run interval in millisec (default: 60000)</span></div><div class="line">                             });</div><div class="line"><span class="keyword">var</span> app = express();</div><div class="line"></div><div class="line">app.set(<span class="string">'port'</span>, process.env.PORT || <span class="number">3000</span>);</div><div class="line">app.set(<span class="string">'views'</span>, __dirname + <span class="string">'/views'</span>);</div><div class="line">app.engine(<span class="string">'.html'</span>, ejs.__express); <span class="comment">//让ejs模板文件，使用扩展名为html的文件。</span></div><div class="line">app.set(<span class="string">'view engine'</span>, <span class="string">'html'</span>); <span class="comment">//修改文件扩展名ejs为html</span></div><div class="line">app.<span class="keyword">use</span>(express.favicon());</div><div class="line">app.<span class="keyword">use</span>(express.logger(<span class="string">'dev'</span>));</div><div class="line">app.<span class="keyword">use</span>(express.bodyParser());</div><div class="line">app.<span class="keyword">use</span>(express.methodOverride());</div><div class="line">app.<span class="keyword">use</span>(express.cookieParser());</div><div class="line">app.<span class="keyword">use</span>(express.cookieSession({secret : <span class="string">'ssm-ide'</span>}));</div><div class="line">app.<span class="keyword">use</span>(express.session({</div><div class="line">                         secret: <span class="string">"ssm-ide"</span>,</div><div class="line">                         store: store,</div><div class="line">                         cookie: { maxAge: <span class="number">900000</span> } <span class="comment">// expire session in 15 min or 900 seconds</span></div><div class="line">                        }));</div><div class="line">app.<span class="keyword">use</span>(<span class="function"><span class="keyword">function</span><span class="params">(req, res, next)</span></span>{</div><div class="line"> res.locals.user = req.session.user;</div><div class="line"> next();</div><div class="line">});</div><div class="line"></div><div class="line">app.<span class="keyword">use</span>(app.router);</div><div class="line">app.<span class="keyword">use</span>(express.<span class="keyword">static</span>(path.join(__dirname, <span class="string">'app'</span>)));</div><div class="line"></div><div class="line"><span class="keyword">if</span> (app.get(<span class="string">'env'</span>) === <span class="string">'development'</span>) {</div><div class="line">    app.<span class="keyword">use</span>(express.errorHandler());</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// angular启动页</span></div><div class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(req, res)</span> </span>{</div><div class="line">    res.sendfile(<span class="string">'app/index.html'</span>);</div><div class="line">});</div><div class="line"></div><div class="line">app.post(<span class="string">'/register'</span>, user.doUserAdd);</div><div class="line"><span class="comment">//以及很多类似的路由配置</span></div><div class="line"></div><div class="line">app.post(<span class="string">'/compress'</span>, <span class="function"><span class="keyword">function</span><span class="params">(req,res)</span></span>{</div><div class="line"> <span class="comment">//压缩，稍后详写</span></div><div class="line">});</div><div class="line"></div><div class="line"></div><div class="line">http.createServer(app).listen(app.get(<span class="string">'port'</span>), <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</div><div class="line"> console.log(<span class="string">'Express server listening on port '</span> + app.get(<span class="string">'port'</span>));</div><div class="line">});</div></pre></td></tr></table></figure>

<h3 id="使用MongoDB(mongoose)存储">使用MongoDB(mongoose)存储</h3>
<p>（以注册为例，删减了与注册示例无关的代码，其他示例类似注册）<br>controller层目录结构：<br><img src="/img/projectsummary/2.jpg" alt="项目总结"><br>model层目录结构：<br><img src="/img/projectsummary/1.jpg" alt="项目总结"></p>
<p>routes_user.js:</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> User = <span class="built_in">require</span>(<span class="string">'./../models/models_user.js'</span>);</div><div class="line"></div><div class="line">exports.doUserAdd = <span class="function"><span class="keyword">function</span><span class="params">(req, res)</span> </span>{</div><div class="line"> <span class="keyword">var</span> newUser=req.body;</div><div class="line"> User.save(newUser,<span class="function"><span class="keyword">function</span><span class="params">(err)</span></span>{</div><div class="line">  <span class="keyword">if</span>(err) {</div><div class="line">   res.send({<span class="string">'success'</span>:<span class="literal">false</span>,<span class="string">'err'</span>:err});</div><div class="line">  } <span class="keyword">else</span> {</div><div class="line">   exports.doUserVersionInit(req, res);</div><div class="line">  }</div><div class="line"> });</div><div class="line">};</div></pre></td></tr></table></figure>

<p>models_user.js:</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> mongodb = <span class="built_in">require</span>(<span class="string">'./mongodb'</span>);</div><div class="line"><span class="keyword">var</span> Schema = mongodb.mongoose.Schema;</div><div class="line"><span class="keyword">var</span> UserSchema = <span class="keyword">new</span> Schema({</div><div class="line">                             username:{ type:<span class="built_in">String</span>, index: <span class="literal">true</span> } ,</div><div class="line">                             password:<span class="built_in">String</span>,</div><div class="line">                             limit:{type:<span class="built_in">Number</span>,<span class="keyword">default</span>:<span class="number">3</span>},</div><div class="line">                             admin:{type:<span class="built_in">Boolean</span>,<span class="keyword">default</span>:<span class="literal">false</span>},</div><div class="line">                             register_time : { type: <span class="built_in">Date</span>, <span class="keyword">default</span>: <span class="built_in">Date</span>.now },</div><div class="line">                             register_confirm : {type:<span class="built_in">Boolean</span>,<span class="keyword">default</span>:<span class="literal">false</span>}</div><div class="line">                            });</div><div class="line"><span class="keyword">var</span> User = mongodb.mongoose.model(<span class="string">"User"</span>, UserSchema);</div><div class="line"><span class="keyword">var</span> UserDAO = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{};</div><div class="line"></div><div class="line">UserDAO.prototype.save = <span class="function"><span class="keyword">function</span><span class="params">(obj, callback)</span> </span>{</div><div class="line"> <span class="keyword">var</span> instance = <span class="keyword">new</span> User(obj);</div><div class="line"> instance.save(<span class="function"><span class="keyword">function</span><span class="params">(err)</span></span>{</div><div class="line">  callback(err);</div><div class="line"> });</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">//省略很多其他方法代码...</span></div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = <span class="keyword">new</span> UserDAO();</div></pre></td></tr></table></figure>

<p>mongodb.js:</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</div><div class="line">mongoose.connect(<span class="string">'mongodb://localhost/ssm-ide'</span>);</div><div class="line">exports.mongoose = mongoose;</div></pre></td></tr></table></figure>

<h3 id="Angular的视图、控制器和指令。">Angular的视图、控制器和指令。</h3>
<p>这里不想写太多，当时都是照着文档上面来的，可是不能完全从文档上获得想要的东西，有时候还是要参考很多资料，别人遇到的问题，还有要动一些脑筋才能解决。</p>
<p>其实用Angular时是很纠结和别扭的，因为和jQuery的思想完全不同，不过一旦了解了它，它给你带来的方便也是很大的，它让我的代码更整洁更规范，而且，不是一坨一坨的了。</p>
<p>在这个项目中的每个组件都需要重写相应的配置属性模板，Angular的$routeProvider在做这样的事让我觉得方便；<br>Angualr的双向绑定在这里也大有用处，因为动态设置组件的时候设置文字，是要及时获取页面上的更新，才能做到所见即所得的；<br>用Angular写组件也是意想不到的方便，其实必要时也可以使用jQuery插件的，就是麻烦点（好吧是很麻烦）；</p>
<p>摘抄一些项目中的代码：</p>
<p>路由：</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>, [<span class="string">'ngResource'</span>,<span class="string">'ngSanitize'</span>,<span class="string">'ngRoute'</span>]);</div><div class="line">app.config([<span class="string">'$routeProvider'</span>, <span class="string">'$locationProvider'</span>,</div><div class="line">          <span class="function"><span class="keyword">function</span><span class="params">(<span class="variable">$routeProvider</span>, <span class="variable">$locationProvider</span>)</span> </span>{</div><div class="line">              <span class="variable">$routeProvider</span></div><div class="line">                  .when(<span class="string">'/listul'</span>, {</div><div class="line">                            controller:<span class="string">'listultplCtrl'</span>,</div><div class="line">                            templateUrl:<span class="string">'views/tpl/listul.html'</span></div><div class="line">                        })</div><div class="line">                  .when(<span class="string">'/page'</span>, {</div><div class="line">                                controller:<span class="string">'pagetplCtrl'</span>,</div><div class="line">                                templateUrl:<span class="string">'views/tpl/pages.html'</span></div><div class="line">                        })</div><div class="line">                  .when(<span class="string">'/preview'</span>, {</div><div class="line">                                templateUrl:<span class="string">'views/tpl/preview.html'</span></div><div class="line">                        })</div><div class="line">               .when(<span class="string">'/tabview'</span>, {</div><div class="line">                      controller:<span class="string">'tabCtrl'</span>,</div><div class="line">                      templateUrl:<span class="string">'views/tpl/tab.html'</span></div><div class="line">                     })    <span class="comment">//省略其他很多组件的路由</span></div><div class="line">            .otherwise({</div><div class="line">                        redirectTo:<span class="string">'/page'</span></div><div class="line">                       });</div><div class="line"></div><div class="line">              <span class="comment">// configure html5 to get links working on jsfiddle</span></div><div class="line">             <span class="comment">//	 $locationProvider.html5Mode(true);</span></div><div class="line">         }]);</div></pre></td></tr></table></figure>

<p>Angular实现可折叠菜单组件（Angular能自己定义html标签 属性 等，很帅）</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">app.directive(<span class="string">'accordionmenu'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line"> <span class="keyword">return</span> {</div><div class="line">  restrict:<span class="string">'EA'</span>,</div><div class="line">  replace:<span class="keyword">true</span>,</div><div class="line">  transclude:<span class="keyword">true</span>,</div><div class="line">  scope:{title:<span class="string">'=accordionmenuTitle'</span>,show:<span class="string">'=accordionmenuShow'</span>},</div><div class="line">  template:<span class="string">'&lt;div&gt;'</span>+</div><div class="line">   <span class="string">'&lt;li class="accordionmenu_title" ng-click="toggle()"&gt;项目总结温故知新 - web前端类&lt;/li&gt;'</span> +</div><div class="line">   <span class="string">'&lt;div ng-show="showMe" ng-transclude&gt;&lt;/div&gt;'</span> +</div><div class="line">   <span class="string">'&lt;/div&gt;'</span>,</div><div class="line">  link : <span class="function"><span class="keyword">function</span><span class="params">(<span class="variable">$scope</span>, <span class="variable">$element</span>,<span class="variable">$attrs</span>)</span> </span>{</div><div class="line">    <span class="variable">$scope</span>.showMe=<span class="variable">$scope</span>.show;</div><div class="line">    <span class="variable">$scope</span>.toggle=<span class="function"><span class="keyword">function</span> <span class="title">toggle</span><span class="params">()</span></span>{</div><div class="line">    <span class="variable">$scope</span>.showMe=!<span class="variable">$scope</span>.showMe;</div><div class="line">   }</div><div class="line">  }</div><div class="line"> }</div><div class="line">});</div></pre></td></tr></table></figure>

<p>在Angular里使用jQuery插件（话说还是用Angular自己写可能要好一些，在Angular里用jQuery插件有点纠结虽然也能用）</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">app.directive(<span class="string">'ngShowfuncpane'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line"> <span class="keyword">return</span> {</div><div class="line">  link : <span class="function"><span class="keyword">function</span><span class="params">($scope, $element)</span> </span>{</div><div class="line">   $($element).bind(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">    <span class="keyword">var</span> menuRight = $( <span class="string">'#cbp-spmenu-s2'</span> )[<span class="number">0</span>];</div><div class="line">    classie.toggle( <span class="keyword">this</span>, <span class="string">'active'</span> );</div><div class="line">    classie.toggle( menuRight, <span class="string">'cbp-spmenu-open'</span> );</div><div class="line">   })</div><div class="line">  }</div><div class="line"> };</div><div class="line">});</div></pre></td></tr></table></figure>

<p>不同组件不同的模板<br>以tabview的template为例：</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>);</div><div class="line">app.controller(<span class="string">'tabCtrl'</span>, [<span class="string">'$scope'</span>, <span class="string">'$location'</span>,<span class="function"><span class="keyword">function</span> <span class="title">tabCtrl</span><span class="params">(<span class="variable">$scope</span>, <span class="variable">$location</span>)</span> </span>{</div><div class="line">    <span class="keyword">if</span>(typeof <span class="variable">$scope</span>.attr == <span class="string">'undefined'</span>) {</div><div class="line">        <span class="variable">$location</span>.url(<span class="string">'/'</span>);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    }</div><div class="line">    <span class="comment">//	更改列表圆角操作</span></div><div class="line">    <span class="variable">$scope</span>.changeIsWrapDivCorner=<span class="function"><span class="keyword">function</span> <span class="title">changeIsWrapDivCorner</span><span class="params">()</span></span>{</div><div class="line">        <span class="keyword">var</span> data = {</div><div class="line">            <span class="string">'seq'</span>:<span class="variable">$scope</span>.seq,</div><div class="line">            <span class="string">'directive'</span>:<span class="string">'changeIsWrapDivCorner'</span>,</div><div class="line">            <span class="string">'attr'</span>:{<span class="string">'isWrapedCorner'</span>:<span class="variable">$scope</span>.isWrapedCornerChecked}</div><div class="line">        }</div><div class="line">        sendMessage_funcdirective(data);</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="comment">//省略一些方法......</span></div><div class="line"></div><div class="line">    <span class="variable">$scope</span>.<span class="variable">$watch</span>(<span class="string">'attr'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line"><span class="comment">//	 第n个列表项</span></div><div class="line">        <span class="variable">$scope</span>.tabItemNo=[];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>;i&lt;=<span class="variable">$scope</span>.attr.tabchildCount;i++){</div><div class="line">            <span class="variable">$scope</span>.tabItemNo.push(i);</div><div class="line">        }</div><div class="line"><span class="comment">//	 列表圆角</span></div><div class="line">        <span class="variable">$scope</span>.isWrapedCornerChecked=<span class="variable">$scope</span>.attr.isWrapedCorner;</div><div class="line"><span class="comment">//	 当前列表项文字内容</span></div><div class="line">        <span class="variable">$scope</span>.tabItemContentInput=<span class="variable">$scope</span>.attr.tabItemContent;</div><div class="line"></div><div class="line"><span class="comment">//	 当前选的正操作的第N个列表项</span></div><div class="line">        <span class="variable">$scope</span>.tabItemNoSelected=<span class="variable">$scope</span>.attr.tabItemNo;</div><div class="line">    },<span class="keyword">true</span>);</div><div class="line"></div><div class="line">    <span class="variable">$scope</span>.TabTitle = <span class="string">'标签布局设置'</span>;</div><div class="line">}]);</div></pre></td></tr></table></figure>

<p>其中sendMessage_funcdirective(data);是发送指令函数，用了一个包，其封装了web worker，我用它来实现iframe父子页面通信<br>$watch是用来监听，只要属性值发生变化就立即触发。</p>
<h3 id="iframe子页面用了jQuery来做DOM操作">iframe子页面用了jQuery来做DOM操作</h3>
<p>iframe子页面不同于父页面，我使用了jQuery，因为根据父页面的指令来动态操控子页面的组件，实现属性的变更，用DOM直接操作更为方便。<br>虽然有人质疑父页面用Angular子页面用jQuery这种方式很奇怪，但我觉得这是最适合的方式，对的东西做对的事，Angular不适合做DOM操作就让他做他适合做的事，我一点不觉得奇怪。</p>
<p>子页面的实现细节就不说了。大概就是接收父页面传来的指令，使用jQuery让其做相应的操作。<br>为了可重用我把子页面属性的更改，写成了jQuery插件的样子，类似这样子，不过每个组件的操作有所不同，实现可重用也是有点困难，索性就每个组件都有这么个jQuery插件文件，有新操作就可以通过扩展相应方法来做。</p>
<p>此为列表项jQuery插件文件方法的缩略版：</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="list">(<span class="title">function</span> <span class="list">($)</span> {</span></div><div class="line"> /<span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span>/</div><div class="line"> /<span class="variable">* 各种属性get函数</span></div><div class="line"> /*<span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">*/</span></div><div class="line"></div><div class="line">//	获取子项个数</div><div class="line"> $.fn.getChildCount = function () {</div><div class="line">  var childCount=$(this).children().length;</div><div class="line">  return childCount;</div><div class="line"> }</div><div class="line">//	获取当前元素是否为圆角</div><div class="line"> $.fn.getIsRoundedCorner = function () {</div><div class="line">  var _this=$(this);</div><div class="line">  return _this.hasClass("ROUNDED")?'yes':'no';</div><div class="line"> }</div><div class="line">//	获取当前列表项是否为链接</div><div class="line"> $.fn.getListItemLink = function () {</div><div class="line">  var _this=$(this);</div><div class="line">  return _this.find("a").length!=0?'yes':'no';</div><div class="line"> }</div><div class="line"> $.fn.getListItemLinkHrefContent = function () {</div><div class="line">  var _this=$(this);</div><div class="line">  var hrefContent='';</div><div class="line">  aLabelHrefList.aLabelEffect();</div><div class="line">  hrefContent=_this.find("a").attr("href");</div><div class="line">  hrefContent=hrefContent.replace(/#/,"");</div><div class="line">  aLabelHrefList.aLabelDisable();</div><div class="line">  return hrefContent;</div><div class="line"> }</div><div class="line"></div><div class="line">//省略很多方法...</div><div class="line"></div><div class="line"> /*<span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">*/</span></div><div class="line"> /* 各种操作函数</div><div class="line"> /<span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span><span class="variable">**</span>/</div><div class="line"></div><div class="line">//	列表项个数<span class="number">+1</span></div><div class="line"> $.fn.addli = function <span class="list">(<span class="title">options</span>)</span> {</div><div class="line">  var _this=$<span class="list">(<span class="title">this</span>)</span><span class="comment">;</span></div><div class="line">  _this.append<span class="list">(<span class="title">_this</span>.children<span class="list">('<span class="keyword">:last</span>')</span>[<span class="number">0</span>].outerHTML)</span><span class="comment">;</span></div><div class="line">  sendMessage_funcpanelinit<span class="list">(<span class="title">_this</span>)</span><span class="comment">;</span></div><div class="line"> }</div><div class="line">//	改变圆角属性</div><div class="line"> $.fn.changeIsRoundedCorner = function <span class="list">(<span class="title">isRoundedCornerChecked</span>)</span> {</div><div class="line">  var _this=$<span class="list">(<span class="title">this</span>)</span><span class="comment">;</span></div><div class="line">  _this.toggleCusClass<span class="list">(<span class="title">isRoundedCornerChecked</span>,<span class="string">"ROUNDED"</span>)</span><span class="comment">;</span></div><div class="line">  sendMessage_funcpanelinit<span class="list">(<span class="title">_this</span>)</span><span class="comment">;</span></div><div class="line"> }</div><div class="line">//	改变选的是第几项列表项时</div><div class="line"> $.fn.changeListItemNo = function <span class="list">(<span class="title">listItemNo</span>)</span> {</div><div class="line">  var _this=$<span class="list">(<span class="title">this</span>)</span><span class="comment">;</span></div><div class="line">  var args={</div><div class="line">   listItemNo<span class="keyword">:listItemNo</span></div><div class="line">  }</div><div class="line">  sendMessage_funcpanelinit<span class="list">(<span class="title">_this</span>,_this.getInitAttr<span class="list">(<span class="title">args</span>)</span>)</span><span class="comment">;</span></div><div class="line"> }</div><div class="line">//	改变列表项内容是否带链接</div><div class="line"> $.fn.changeListItemLink = function <span class="list">(<span class="title">listItemNo</span>,listItemLink)</span> {</div><div class="line">  var _this=$<span class="list">(<span class="title">this</span>)</span>.children<span class="list">()</span>.eq<span class="list">(<span class="title">listItemNo-1</span>)</span><span class="comment">;</span></div><div class="line">  var content='',</div><div class="line">   small=''<span class="comment">;</span></div><div class="line">  if<span class="list">(<span class="title">listItemLink==</span><span class="quoted">'yes</span>')</span>{</div><div class="line">   if<span class="list">(<span class="title">_this</span>.find<span class="list">(<span class="quoted">'a</span>')</span>.length==<span class="number">0</span>)</span>{</div><div class="line">    content =_this.text<span class="list">()</span><span class="comment">;</span></div><div class="line">    if<span class="list">(<span class="title">_this</span>.find<span class="list">(<span class="string">"small"</span>)</span>.length!=<span class="number">0</span>)</span>{</div><div class="line">     var tmp= eval<span class="list">(<span class="string">"/"</span> + _this.find<span class="list">(<span class="string">"small"</span>)</span>.text<span class="list">()</span> + <span class="string">"/ig"</span>)</span><span class="comment">;</span></div><div class="line">     content = content.replace<span class="list">(<span class="title">tmp</span>, '')</span><span class="comment">;</span></div><div class="line">     small = _this.children<span class="list">(<span class="string">"small"</span>)</span>.parent<span class="list">()</span>.html<span class="list">()</span>.replace<span class="list">(<span class="title">content</span>, '')</span><span class="comment">;</span></div><div class="line">    }</div><div class="line">    content=<span class="string">"&lt;a href='#'&gt;"</span>+content+<span class="string">"&lt;/a&gt;"</span>+small<span class="comment">;</span></div><div class="line">    _this.html<span class="list">(<span class="title">content</span>)</span><span class="comment">;</span></div><div class="line">   }</div><div class="line">  }else{</div><div class="line">   content=_this.find<span class="list">(<span class="string">"a"</span>)</span>.text<span class="list">()</span><span class="comment">;</span></div><div class="line">   _this.prepend<span class="list">(<span class="title">content</span>)</span>.find<span class="list">(<span class="string">"a"</span>)</span>.remove<span class="list">()</span><span class="comment">;</span></div><div class="line">  }</div><div class="line"> }</div><div class="line"></div><div class="line">//省略很多方法...</div><div class="line"></div><div class="line">})<span class="list">(<span class="title">jQuery</span>)</span><span class="comment">;</span></div></pre></td></tr></table></figure>

<h3 id="模块化的写法">模块化的写法</h3>
<p>为了实现像java那个样子，封装起某个类，能调用类的某个方法，还需要暂存起某个变量的值，这个真的没少下工夫，当时的我不知道Javascript有模块化的写法，也不知道闭包（乃们不要鄙视我这个当时没看过Javascript书的孩纸啦），按照自己的想法去查资料最终终于了解到闭包可以使变量值保存在内存中这样的事。</p>
<p>应用模块化的写法，我封装了很多个模块，解决了诸如在线可视化编辑js代码（在线编辑，删除，随当前版本被存入数据库），预览（预览情况下才链接才可以跳转，编辑状态链接不可跳转）等等困扰我很久的疑难杂症。</p>
<p>摘录一些可视化编辑js的代码：</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> eventDataHandle = (<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line"><span class="comment">//	 将新增的事件绑定加入eventlist</span></div><div class="line"> <span class="keyword">var</span> insertEventjsIntoEventlist = <span class="function"><span class="keyword">function</span><span class="params">(msg)</span></span>{</div><div class="line">   <span class="keyword">var</span> _eventlist=eventList.getEventlist();</div><div class="line">   <span class="keyword">var</span> addedNewFuncIntoFunclist=<span class="literal">false</span>;</div><div class="line">   <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;_eventlist.length;i++){</div><div class="line">    <span class="keyword">var</span> thislist=_eventlist[i];</div><div class="line">    <span class="keyword">if</span>(thislist.seq==msg.seq){</div><div class="line">     <span class="keyword">var</span> childattrAreSame=<span class="literal">false</span>,</div><div class="line">      CHILDATTRARESAMEFLAG=<span class="literal">false</span>,</div><div class="line">      funcindex=<span class="number">0</span>;</div><div class="line">     <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;thislist.funclist.length;j++){</div><div class="line">      <span class="keyword">var</span> thisfunc=thislist.funclist[j];</div><div class="line"><span class="comment">//	 对于新增的这个事件和原来funclist里的事件们，判断他们的functype是否相同</span></div><div class="line"><span class="comment">// 如果相同则判断是否操作在funclist里面同一个子元素,</span></div><div class="line"><span class="comment">// 如果相同就替换funcContent</span></div><div class="line"><span class="comment">// 如果不相同就添加新事件进funclist</span></div><div class="line"><span class="comment">//	 如果functype找不到相同的就直接添加新事件进funclist</span></div><div class="line">      <span class="keyword">if</span>(thisfunc.funcType.val==msg.funcType.val){</div><div class="line">       <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> thisfunc.childattr){</div><div class="line">        <span class="keyword">var</span> tmp1=msg.childattr[key],</div><div class="line">         tmp2=thisfunc.childattr[key];</div><div class="line">        <span class="keyword">if</span>(tmp1==tmp2){</div><div class="line">         childattrAreSame=<span class="literal">true</span>;</div><div class="line">        }<span class="keyword">else</span>{</div><div class="line">         childattrAreSame=<span class="literal">false</span>;</div><div class="line">         <span class="keyword">break</span>;</div><div class="line">        }</div><div class="line">       }</div><div class="line">       <span class="keyword">if</span>(childattrAreSame){</div><div class="line">        CHILDATTRARESAMEFLAG=<span class="literal">true</span>;</div><div class="line">        funcindex = j;</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">       }</div><div class="line">      }</div><div class="line">     }</div><div class="line">     <span class="keyword">if</span>(CHILDATTRARESAMEFLAG){</div><div class="line">      _eventlist[i].funclist[funcindex].funcContent=msg.funcContent;</div><div class="line">      addedNewFuncIntoFunclist=<span class="literal">true</span>;</div><div class="line">      <span class="keyword">break</span>;</div><div class="line">     }</div><div class="line">     <span class="keyword">if</span>(!addedNewFuncIntoFunclist){</div><div class="line">      <span class="keyword">var</span> tmpfunc={</div><div class="line">       eventid:msg.eventid,</div><div class="line">       childattr:msg.childattr,</div><div class="line">       funcType:msg.funcType,</div><div class="line">       funcContent:msg.funcContent</div><div class="line">      }</div><div class="line">      _eventlist[i].funclist.push(tmpfunc);</div><div class="line">      addedNewFuncIntoFunclist=<span class="literal">true</span>;</div><div class="line">      <span class="keyword">break</span>;</div><div class="line">     }</div><div class="line">    }</div><div class="line">   }</div><div class="line">  <span class="keyword">if</span>(!addedNewFuncIntoFunclist){</div><div class="line">   <span class="keyword">var</span> tmpevent={</div><div class="line">    seq:msg.seq,</div><div class="line">    funclist:[{</div><div class="line">     eventid:msg.eventid,</div><div class="line">     childattr:msg.childattr,</div><div class="line">     funcType:msg.funcType,</div><div class="line">     funcContent:msg.funcContent</div><div class="line">    }]</div><div class="line">   }</div><div class="line">   _eventlist.push(tmpevent);</div><div class="line">  }</div><div class="line">  eventList.setEventlist(_eventlist);</div><div class="line"> };</div><div class="line"></div><div class="line"> <span class="comment">//省略一大堆方法...</span></div><div class="line"></div><div class="line"> <span class="keyword">var</span> getWholeDefaultjslist=<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">  <span class="keyword">var</span>	_defaulteventlist=defaultjslist?defaultjslist.getDefaultjslist():[];</div><div class="line">  <span class="keyword">return</span> _defaulteventlist;</div><div class="line"> }</div><div class="line"> <span class="keyword">return</span> {</div><div class="line">  insertEventjsIntoEventlist: insertEventjsIntoEventlist,</div><div class="line">  getWholeDefaultjslist:getWholeDefaultjslist</div><div class="line"><span class="comment">//省略一大堆代码</span></div><div class="line"> }</div><div class="line">})();</div></pre></td></tr></table></figure>

<h3 id="关于拖拽">关于拖拽</h3>
<p>使用了HTML5的拖拽写法<br>同样摘录部分代码：<br>HTML：</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="subst">&lt;</span>span id<span class="subst">=</span><span class="string">"xx"</span> draggable<span class="subst">=</span><span class="string">"true"</span> ondragstart<span class="subst">=</span><span class="string">"drag(event)"</span><span class="subst">&gt;</span></div><div class="line"><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span></div><div class="line"><span class="subst">&lt;</span>/span<span class="subst">&gt;</span></div></pre></td></tr></table></figure>

<p>JS:</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.readyState==<span class="string">"complete"</span>)</div><div class="line">{</div><div class="line"> dragEvent();</div><div class="line">}</div><div class="line"><span class="keyword">else</span></div><div class="line">{</div><div class="line"> <span class="built_in">document</span>.onreadystatechange = <span class="function"><span class="keyword">function</span><span class="params">()</span></span></div><div class="line"> {</div><div class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.readyState == <span class="string">"complete"</span>)</div><div class="line">  {</div><div class="line">   dragEvent();</div><div class="line">  }</div><div class="line"> }</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragEvent</span><span class="params">()</span></span>{</div><div class="line"> </div><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">onDragOver</span><span class="params">(event)</span></span>{</div><div class="line">  <span class="keyword">if</span>(event.preventDefault) event.preventDefault();</div><div class="line">  <span class="keyword">if</span> (event.stopPropagation) event.stopPropagation();</div><div class="line">  <span class="keyword">else</span> event.cancelBubble = <span class="literal">true</span>;</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line"> }</div><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">onDrop</span><span class="params">(event)</span></span>{</div><div class="line">  <span class="keyword">if</span>(event.preventDefault) event.preventDefault();</div><div class="line">  <span class="keyword">if</span> (event.stopPropagation) event.stopPropagation();</div><div class="line">  <span class="keyword">else</span> event.cancelBubble = <span class="literal">true</span>;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> id = event.dataTransfer.getData(<span class="string">"Text"</span>);</div><div class="line">  <span class="keyword">var</span> item = <span class="built_in">document</span>.getElementById(id);</div><div class="line">  addtores(item, id);</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line"> }</div><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">addtores</span><span class="params">(item, id)</span> </span>{</div><div class="line">  <span class="keyword">var</span> item =$(<span class="string">'.'</span>+id+<span class="string">'obj'</span>)[<span class="number">0</span>],</div><div class="line">   itemid=$(<span class="string">'.'</span>+id+<span class="string">'id'</span>).html(),</div><div class="line">   itemjs=$(<span class="string">'.'</span>+id+<span class="string">'js'</span>).html(),</div><div class="line">   clone = item.cloneNode(<span class="literal">true</span>);</div><div class="line">  <span class="keyword">if</span>(itemid!=<span class="literal">undefined</span>){</div><div class="line">   $(clone).removeClass(id+<span class="string">'obj'</span>).attr({id:itemid,type:id,seq:<span class="built_in">Math</span>.uuid()});</div><div class="line">  }<span class="keyword">else</span>{</div><div class="line">   $(clone).removeClass(id+<span class="string">'obj'</span>).attr({type:id,seq:<span class="built_in">Math</span>.uuid()});</div><div class="line">  }</div><div class="line"><span class="comment">//	 将拖拽的东西添加到iframe中当前的页面</span></div><div class="line">  iframeinfo.getSpeIframeBlockobj(iframeinfo.getPageid()).appendChild(clone);</div><div class="line"><span class="comment">//	---	触发sortable and funclistener BEGIN ---</span></div><div class="line">  <span class="keyword">var</span> objdata={<span class="string">'directive'</span>:<span class="string">'main'</span>};</div><div class="line">  objdata = <span class="built_in">JSON</span>.stringify(objdata);</div><div class="line">  messenger.targets[<span class="string">'mainIframe'</span>].send(objdata);</div><div class="line"><span class="comment">//	---	触发sortable and funclistener END ---</span></div><div class="line">  <span class="keyword">if</span>(itemjs!=<span class="literal">undefined</span>){</div><div class="line">   <span class="keyword">var</span> jsdata={</div><div class="line">    <span class="string">'directive'</span>:<span class="string">'defaultjsbind'</span>,</div><div class="line">    <span class="string">'objtype'</span>:id,</div><div class="line">    <span class="string">'objid'</span>:itemid?itemid:<span class="string">''</span>,</div><div class="line">    <span class="string">'defaultjs'</span>:itemjs</div><div class="line">   };</div><div class="line">   jsdata = <span class="built_in">JSON</span>.stringify(jsdata);</div><div class="line">   <span class="built_in">console</span>.log(<span class="string">"jsdata"</span>,jsdata);</div><div class="line">   messenger.targets[<span class="string">'mainIframe'</span>].send(jsdata);</div><div class="line">  }</div><div class="line"> }</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drag</span><span class="params">(ev)</span></span></div><div class="line">{</div><div class="line"> <span class="keyword">if</span>(iframeinfo.getPagestate()!=<span class="string">"preview"</span>){</div><div class="line">  ev.dataTransfer.setData(<span class="string">"Text"</span>,ev.target.id);</div><div class="line"> }<span class="keyword">else</span>{</div><div class="line">  alert(<span class="string">"预览状态不可添加组件！~"</span>);</div><div class="line"> }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>iframe子页面的拖拽排序是用的jQueryUI…</p>
<h3 id="打包压缩怎么做？">打包压缩怎么做？</h3>
<p>贴一个打包压缩代码，是最开始贴的app.js里省略的</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">app.post(<span class="string">'/compress'</span>, <span class="function"><span class="keyword">function</span><span class="params">(req,res)</span></span>{</div><div class="line"> <span class="keyword">var</span> newbodycode=req.body.bodycode,</div><div class="line">  bindfunc=req.body.bindfunc,</div><div class="line">  defaultjs=req.body.defaultjs,</div><div class="line">  bindfuncreg=<span class="regexp">/\r/g</span>,</div><div class="line">  output = file_system.createWriteStream(<span class="string">'app/res.zip'</span>),</div><div class="line">  archive = archiver(<span class="string">'zip'</span>),</div><div class="line">  scriptreg=<span class="regexp">/&lt;script\s\S*/g</span>;</div><div class="line"></div><div class="line"> bindfunc=<span class="string">"var ssM = $.ssm();$(function (){"</span>+defaultjs+bindfunc.replace(bindfuncreg, <span class="string">''</span>)+<span class="string">"});"</span>;</div><div class="line"> newbodycode=<span class="string">"&lt;body&gt;"</span>+newbodycode.replace(scriptreg, <span class="string">''</span>)+<span class="string">'&lt;script src="index.js" type="text/javascript" charset="utf-8"&gt;&lt;/script&gt;'</span>+<span class="string">"&lt;/body&gt;"</span>;</div><div class="line"> fs.readFile(<span class="string">'app/ires/res.html'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span><span class="params">(err, data)</span> </span>{</div><div class="line">  <span class="keyword">if</span>(err) {</div><div class="line">   <span class="keyword">return</span> <span class="built_in">console</span>.log(err);</div><div class="line">  }</div><div class="line">  <span class="keyword">var</span> linkreg=<span class="regexp">/&lt;link\shref=.*/</span>,</div><div class="line">   bodyreg=<span class="regexp">/&lt;body&gt;[\S\s]*?&lt;\/body&gt;/</span>,</div><div class="line">   tmphtmlcontent=data.replace(linkreg, <span class="string">''</span>),</div><div class="line">   htmlcontent=tmphtmlcontent.replace(bodyreg,newbodycode);</div><div class="line"></div><div class="line">  fs.writeFile(<span class="string">'app/ires/index.html'</span>, htmlcontent, <span class="function"><span class="keyword">function</span><span class="params">(err)</span> </span>{</div><div class="line">   <span class="keyword">if</span>(err) {</div><div class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(err);</div><div class="line">   }</div><div class="line">   <span class="built_in">console</span>.log(<span class="string">'writing done to index.html'</span>);</div><div class="line">  })</div><div class="line"></div><div class="line"> });</div><div class="line"> fs.writeFile(<span class="string">'app/ires/index.js'</span>, bindfunc, <span class="function"><span class="keyword">function</span><span class="params">(err)</span> </span>{</div><div class="line">  <span class="keyword">if</span>(err) {</div><div class="line">   <span class="keyword">return</span> <span class="built_in">console</span>.log(err);</div><div class="line">  }</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'writing done to index.js'</span>);</div><div class="line"> })</div><div class="line"> output.on(<span class="string">'close'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</div><div class="line">  <span class="built_in">console</span>.log(archive.pointer() + <span class="string">' total bytes'</span>);</div><div class="line">  res.write(<span class="string">"success"</span>);</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'archiver has been finalized and the output file descriptor has closed.'</span>);</div><div class="line">  res.end();</div><div class="line"> });</div><div class="line"> archive.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span><span class="params">(err)</span></span>{</div><div class="line">  <span class="keyword">throw</span> err;</div><div class="line"> });</div><div class="line"></div><div class="line"> archive.pipe(output);</div><div class="line"> archive.bulk([</div><div class="line">               { expand: <span class="literal">true</span>, cwd: <span class="string">'app/ires'</span>, src: [<span class="string">'*.js'</span>,<span class="string">'*.css'</span>,<span class="string">'index.html'</span>,<span class="string">'*/**'</span>]}</div><div class="line">              ]);</div><div class="line"> archive.finalize();</div><div class="line">});</div></pre></td></tr></table></figure>

<p>代码略复杂我写的时候也是很纠结的呀，因为打包压缩的结果是用来给用户下载的，所以想要使生成的文件尽量整洁，去掉由编辑器生成的一些东西，所以写了一些正则去掉一些结果文件不需要的文件之类的，然后再将这些字符写进新的文件（很多个新文件）并打包以供下载。</p>
<p>弄到现在我自己也快晕死了，一次看这么多代码，吃不消…</p>
<h3 id="其他">其他</h3>
<p>大概的差不多了，贴上来的都是很简单的，复杂的处理，和一些奇葩的问题就不贴了。<br>剩下比较有意义的可能就是设计方面的东西，比如父子页面相互通信时候需要添加一些必要的信息比如一个独一无二的码，不然真的没有办法改变相应的属性的。<br>图标方面用到了图标字体，用AI来画，用阿里妈妈图标库那个来生成，搞定。</p>
<p>当时做这个东西，很纠结，因为太多东西要考虑，搞不好就要放弃掉之前的想法重头来过，由于设计不成熟就开始写代码写出的问题也是成堆成堆的。<br>所以我明白了啊..设计是如此重要，据说有很多程序员都是这样才加班的，其实如果设计好了，写代码的时间会大大缩短的吧，当时我也不懂这个道理，有点想法，就扑上去写代码，结果最后写出很多问题。<br>这个项目学到了很多，也思考很多，不仅是作为程序员的角度。</p>
<hr>
<h2 id="参与某移动web框架的开发">参与某移动web框架的开发</h2>
<p>其实说是“参与开发”，可是当我参与的时候，整个项目其实已经只是我自己一个了。<br>当时我虽然自己作为练习写过一个js版俄罗斯方块，可是没有经常用js没有很熟悉，css也不熟悉，一切从头开始。<br>那段时间其实是我不愿提及的一段时间，什么都不会的我，面对着那么多文件，真的快晕掉了，而且已经存在的也并不完美<br>庆幸的是内核的东西我不用动，必要的时候读一下懂了就可以，我要做的是为其添加插件，按照已有的接口，添加插件就可以了，没有比这更让我开心的了。</p>
<p>可是也不是一帆风顺，由于用的是早期的zepto（我曾尝试过换成新的版本可是问题更多），还是碰到一些奇葩的问题，只能默默的研究解决，实在不行就只能另辟蹊径，不过那段时间真的是挺锻炼人的，做了几个插件之后我觉得我的Javascript已经比较熟悉了（虽然现在看来写的代码还是一坨屎）。</p>
<p>做什么插件完全由我自己决定，前前后后做了：滚动焦点图，标题下拉框，加载中动画，柱形图<br>让我看看以前写的东西有什么需要注意的东西吧~</p>
<h3 id="滚动焦点图">滚动焦点图</h3>
<p><strong>思路</strong>：获取组件中列表子元素，根据自定义属性（如不设置有默认属性），设置高度，将每个列表子元素中的图片的宽设置成屏幕宽度（由于是做手机上的插件，当时就那样写了），整个列表宽度设置成屏幕宽度*图个数，设置定时器，根据设定的时间间隔属性，通过animate动画设置列表的left值，显示前一张后一张，同时更改右下角指示第几张图的小按钮颜色。</p>
<p><strong>优</strong>：做的第一个组件就有了，属性设置的概念（通过data-setting设置属性），并给出默认属性值<br><strong>缺</strong>：现在看来这个组件问题很多，作为一个组件，应该每个都是一个独立的实例才好，而这里，统一获取的带某class的div，这样所有的组件并不能达到独立的目的，如果用经典的继承、构造函数就可以做到。最后一个图片和第一个图片的相互切换的处理很粗糙，如果做成无限循环更好。每个图片的宽度设置为全屏幕的宽度的处理欠妥。</p>
<p>有空一定要再写一个表现完美的滚动焦点图。</p>
<h3 id="标题下拉框">标题下拉框</h3>
<p><strong>思路</strong>：标题所在的div加CLASS=”HEADSELECT” 和 id=”XX”（用于绑定回调函数）所在div添加ul列表里面是下拉列表框的列表内容。<br>点击标题时，切换标记（展开/合起），并添加或删除相应的class，并触发step函数（动画效果，慢慢展开和慢慢合起的动画，不是突然出现突然消失）及切换遮罩层的显示和不显示</p>
<p>step函数：</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> step = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">     height = display? (height + <span class="number">5</span>): (height - <span class="number">5</span>);</div><div class="line">     ul_height = display? ((height+<span class="number">21</span>)*<span class="variable">$count</span>): <span class="number">0</span>;</div><div class="line">     <span class="keyword">if</span> (height &lt; <span class="number">0</span>) {</div><div class="line">      height = <span class="number">0</span>;</div><div class="line">     } <span class="keyword">else</span> <span class="keyword">if</span> (height &gt; <span class="number">20</span>) {</div><div class="line">      height = <span class="number">20</span>;</div><div class="line">     }</div><div class="line">     <span class="variable">$option_li</span>.height(height + <span class="string">"px"</span>);</div><div class="line">     <span class="variable">$option_ul</span>.height( ul_height+ <span class="string">"px"</span>);</div><div class="line">     <span class="keyword">if</span> (height &gt; <span class="number">0</span> && height &lt; <span class="number">20</span>) {</div><div class="line">      timer = setTimeout(step, <span class="number">40</span>);</div><div class="line">     }</div><div class="line">    };</div></pre></td></tr></table></figure>

<p>监听器（elem：包含标题和下拉框ul的div的id，callback：回调函数）：</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">addListener: <span class="function"><span class="keyword">function</span><span class="params">(elem, callback)</span></span>{</div><div class="line">   <span class="keyword">var</span> <span class="variable">$elem</span> = $(elem),</div><div class="line">    <span class="variable">$list</span> = <span class="variable">$elem</span>.children(<span class="string">'ul'</span>);</div><div class="line"></div><div class="line">   <span class="variable">$list</span>.on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">(event)</span> </span>{</div><div class="line">    event.preventDefault();</div><div class="line"></div><div class="line">    <span class="keyword">var</span> target = event.target,</div><div class="line">     <span class="variable">$target</span> = $(target);</div><div class="line">    <span class="keyword">if</span> (<span class="variable">$target</span>.is(<span class="string">'li'</span>)||<span class="variable">$target</span>.<span class="keyword">parent</span>().is(<span class="string">'li'</span>))</div><div class="line">    {</div><div class="line">     callback.call(elem, target);</div><div class="line">    }</div><div class="line"></div><div class="line">   });</div><div class="line">  }</div></pre></td></tr></table></figure>

<p><strong>优</strong>：思路较清晰<br><strong>缺</strong>：异常处理不太完备</p>
<h3 id="加载中动画">加载中动画</h3>
<p><strong>思路</strong>：觉得这个插件主要功夫在于CSS3的写法，剩下就是触发时把相关html加上….传参时要传show/hide及相关配置属性参数</p>
<p>CSS代码：</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div></pre></td><td class="code"><pre><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</div><div class="line"> <span class="rule"><span class="attribute">top</span>:<span class="value"><span class="number">50%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">left</span>:<span class="value"><span class="number">50%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-left</span>:<span class="value">-<span class="number">25px</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-top</span>:<span class="value">-<span class="number">25px</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">50px</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">50px</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">z-index</span>:<span class="value"> <span class="number">100</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="at_rule">@<span class="keyword">-webkit-keyframes</span> trans</span>{</div><div class="line"> <span class="tag">from</span><span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">opacity</span>:<span class="value"><span class="number">1</span></span></span>;</div><div class="line"> <span class="rule">}</span></div><div class="line"> <span class="tag">to</span><span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">opacity</span>:<span class="value"><span class="number">0.1</span></span></span>;</div><div class="line"> <span class="rule">}</span></div><div class="line">}</div><div class="line"><span class="at_rule">@<span class="keyword">-moz-keyframes</span> trans</span>{</div><div class="line"> <span class="tag">from</span><span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">opacity</span>:<span class="value"><span class="number">1</span></span></span>;</div><div class="line"> <span class="rule">}</span></div><div class="line"> <span class="tag">to</span><span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">opacity</span>:<span class="value"><span class="number">0.1</span></span></span>;</div><div class="line"> <span class="rule">}</span></div><div class="line">}</div><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span> <span class="tag">div</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</div><div class="line"> <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100%</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"></div><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span> <span class="tag">div</span> <span class="tag">span</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">display</span>:<span class="value"> block</span></span>;</div><div class="line"> <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#000000</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-webkit-border-radius</span>:<span class="value"> <span class="number">100%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-moz-border-radius</span>:<span class="value"> <span class="number">100%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-webkit-animation</span>:<span class="value"> trans <span class="number">0.8s</span> ease-in infinite alternate</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.LOADING</span> <span class="tag">div</span> <span class="tag">span</span><span class="pseudo">:nth-child(1)</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">18%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">18%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">0%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">9%</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span> <span class="tag">div</span> <span class="tag">span</span><span class="pseudo">:nth-child(2)</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">16.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">16.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">15%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">28%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">8.25%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-top</span>:<span class="value"> -<span class="number">8.25%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-webkit-animation-delay</span>:<span class="value"><span class="number">0.1s</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span> <span class="tag">div</span> <span class="tag">span</span><span class="pseudo">:nth-child(3)</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">15%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">15%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">30%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">12%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">7.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-top</span>:<span class="value"> -<span class="number">7.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-webkit-animation-delay</span>:<span class="value"><span class="number">0.2s</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span> <span class="tag">div</span> <span class="tag">span</span><span class="pseudo">:nth-child(4)</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">13.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">13.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">0%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">50%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-top</span>:<span class="value"> -<span class="number">6.75%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-webkit-animation-delay</span>:<span class="value"><span class="number">0.3s</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span> <span class="tag">div</span> <span class="tag">span</span><span class="pseudo">:nth-child(5)</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">12%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">12%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">bottom</span>:<span class="value"> <span class="number">28%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">12%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">6%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-bottom</span>:<span class="value"> -<span class="number">6%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-webkit-animation-delay</span>:<span class="value"><span class="number">0.4s</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span> <span class="tag">div</span> <span class="tag">span</span><span class="pseudo">:nth-child(6)</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">10.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">10.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">bottom</span>:<span class="value"> <span class="number">12%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">28%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">5.25%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-bottom</span>:<span class="value"> -<span class="number">5.25%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-webkit-animation-delay</span>:<span class="value"><span class="number">0.5s</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span> <span class="tag">div</span> <span class="tag">span</span><span class="pseudo">:nth-child(7)</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">9%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">9%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">bottom</span>:<span class="value"> <span class="number">0%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">4.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-webkit-animation-delay</span>:<span class="value"><span class="number">0.6s</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span> <span class="tag">div</span> <span class="tag">span</span><span class="pseudo">:nth-child(8)</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">7.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">7.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">right</span>:<span class="value"> <span class="number">25%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">bottom</span>:<span class="value"> <span class="number">10%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-right</span>:<span class="value"> -<span class="number">3.75%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-bottom</span>:<span class="value"> -<span class="number">3.75%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-webkit-animation-delay</span>:<span class="value"><span class="number">0.7s</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span> <span class="tag">div</span> <span class="tag">span</span><span class="pseudo">:nth-child(9)</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">6%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">6%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">bottom</span>:<span class="value"> <span class="number">26%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">right</span>:<span class="value"> <span class="number">8%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-right</span>:<span class="value"> -<span class="number">3%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-bottom</span>:<span class="value"> -<span class="number">3%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-webkit-animation-delay</span>:<span class="value"><span class="number">0.725s</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span> <span class="tag">div</span> <span class="tag">span</span><span class="pseudo">:nth-child(10)</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">4.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">4.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">50%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">right</span>:<span class="value"> <span class="number">0%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">2.25%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-webkit-animation-delay</span>:<span class="value"><span class="number">0.75s</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span> <span class="tag">div</span> <span class="tag">span</span><span class="pseudo">:nth-child(11)</span><span class="rules">{</span></div><div class="line"> <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">3%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">3%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">30%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">right</span>:<span class="value"> <span class="number">9%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-right</span>:<span class="value"> -<span class="number">1.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-top</span>:<span class="value"> -<span class="number">1.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-webkit-animation-delay</span>:<span class="value"><span class="number">0.775s</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="id">#ssm</span> <span class="class">.LOADING</span> <span class="tag">div</span> <span class="tag">span</span><span class="pseudo">:nth-child(12)</span><span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">1.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">1.5%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">14%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">right</span>:<span class="value"> <span class="number">26%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-right</span>:<span class="value"> -<span class="number">0.75%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">margin-top</span>:<span class="value"> -<span class="number">0.75%</span></span></span>;</div><div class="line"> <span class="rule"><span class="attribute">-webkit-animation-delay</span>:<span class="value"><span class="number">0.78s</span></span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p><strong>优</strong>：这CSS代码写下来也是蛮拼的<br><strong>缺</strong>：CSS3没有太深入研究过，不知还有更简练的写法没有，不过貌似我只写了webkit内核的啊 0.0 晕~</p>
<h3 id="柱形图">柱形图</h3>
<p><strong>思路</strong>：这个组件虽然完成了很长时间了但是我印象深刻啊…因为想要做到让给的数据生成的柱形图比例还有刻度那些比较协调还是花了些功夫写算法啊….而且是第一次接触canvas，重点就是用canvas按照计算的比例把图画出来。<br>做之前调研过图表插件之类的，人家都是写好的重用的东西之类的啊，很多插件都是用了以前写过的方法之类的…我当时没有那么高的眼界，而且我就只做个柱形图，以前又没有做过，这个做不做得出来都不知道，只好不管那些，能写出来个能用的就行了，如果之后要做其他图表，再来将这个整理一下（那一定是师弟师妹们要做的了）。</p>
<p><strong>算法的思路</strong>（写在注释里面的一些东西，现在看还是有点难理解，当时写也是蛮纠结的）：<br>获取每个柱子 经过比例换算后的 高度对应的px<br>获取图区域y轴总px<br>y_show_max（y轴显示数据的最大值）/px_max（y轴总px）=data（数据大小）/data_px（数据对应高度的px）<br>获取输入数据最大值对应的能被5整除的划分的阶 比如 0.6即0.05 1.032即0.5 12即5 120即50<br>获取数据最大值小一级的5的倍数 如100位即50 10位为5…<br>获取y轴显示数据的最大值<br>输入数据最大值/阶 取上整 再乘回阶 即得到比输入数据最大值大一些且为5的倍数的y轴显示最大值<br>如果最小值为负数 则输入数据最小值/阶 取下整 再乘回阶 即得到比输入数据最小值小一些且为5的倍数的y轴显示最小值</p>
<p>有没有晕，反正我是有点晕了，大概的思路就是按照比例来啦，不过就是要分析一下这些要生成柱形图的数据，最大值最小值是什么级别的，来划分y轴的跨度之类的，而且要让最大值显示在整个柱形图的高度的80%处。</p>
<p>贴个最简单的坐标系的画法，其他比这个复杂，不过也差不多，画线或填充。</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//	 创建一个画柱形图的 canvas画布</span></div><div class="line">                <span class="keyword">var</span> canvas_graph = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line"></div><div class="line"><span class="comment">//	 设置刚刚创建的画柱形图的 canvas画布的属性</span></div><div class="line">                canvas_graph.id = target + <span class="string">"_1"</span>;</div><div class="line">                canvas_graph.width = parameter.c_width;</div><div class="line">                canvas_graph.height = parameter.c_height;</div><div class="line">                canvas_graph.style.position = <span class="string">"absolute"</span>;</div><div class="line">                canvas_graph.style.left = <span class="number">16</span> + <span class="number">5</span> + (data_level.toString().length + <span class="number">1</span>) * <span class="number">6</span>;<span class="comment">//一个数字占6px 再设置其离数字5px的距离 16px是给yaxis_label留的</span></div><div class="line">                <span class="keyword">if</span> (settings.yaixs_label == <span class="string">""</span>) {</div><div class="line">                    canvas_graph.style.left = <span class="number">5</span> + (data_level.toString().length + <span class="number">1</span>) * <span class="number">6</span>;</div><div class="line">                }</div><div class="line">                canvas_graph.style.top = <span class="number">30</span>;</div><div class="line"></div><div class="line"><span class="comment">//	 将柱形图的 canvas添加到容器div中</span></div><div class="line">                div_target.appendChild(canvas_graph);</div><div class="line"></div><div class="line"><span class="comment">//	 获取一个用于在柱形图画布上绘图的环境</span></div><div class="line">                <span class="keyword">var</span> canvas_graph_ctx = canvas_graph.getContext(<span class="string">'2d'</span>);</div><div class="line"></div><div class="line"><span class="comment">//	 画坐标</span></div><div class="line">                canvas_graph_ctx.beginPath();</div><div class="line"><span class="comment">//	 坐标颜色</span></div><div class="line">                canvas_graph_ctx.strokeStyle = <span class="string">'#A0A0A0'</span>;</div><div class="line"><span class="comment">//	 画笔轨迹是个L型</span></div><div class="line">                canvas_graph_ctx.moveTo(parameter.x_start, parameter.c_height - parameter.y_start);</div><div class="line">                canvas_graph_ctx.lineTo(parameter.x_start, parameter.y_start);</div><div class="line">                canvas_graph_ctx.lineTo(parameter.c_width + parameter.x_start, parameter.y_start);</div><div class="line">                canvas_graph_ctx.stroke();</div></pre></td></tr></table></figure>

<p>优：给自己的执着点个赞，为了让显示更细腻，做了很多算法的处理，也是蛮拼的，<br>缺：虽然写了那么多注释，算法还是蛮难懂的，自己都看不太懂，维护是个问题，可重用方面也许提升，不过已经还不错啦。</p>
<p>很想深入学习一下canvas呢……</p>
<hr>
<h2 id="Java_web系列项目小结">Java web系列项目小结</h2>
<p>不可否认，我关于项目的启蒙全部来源于java项目，不过这个系列其实没什么好写的，关于前端方面主要就是jQuery的表单操作还有jQuery插件的使用、jstl的使用，做java的项目界面也主要用的bootstrap，主要的练习在于java后台的练习，所以这个系列我也就偷个懒啦，不那么仔细的搞咯~ 话说很久没写JAVA还真是有点陌生了呢..</p>
<p>jstl使用(摘录)：</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="vbscript">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span></div><div class="line"></div><div class="line">........................................................</div><div class="line"><span class="tag">&lt;<span class="title">form</span> <span class="attribute">class</span>=<span class="value">"form-inline"</span> <span class="attribute">role</span>=<span class="value">"form"</span> <span class="attribute">method</span>=<span class="value">"post"</span> <span class="attribute">action</span>=<span class="value">"&lt;c:url value="</span>/<span class="attribute">bill</span>/<span class="attribute">billFilter.action</span>"/&gt;</span>"&gt;</div><div class="line">........................</div><div class="line"><span class="tag">&lt;/<span class="title">form</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">form</span> <span class="attribute">name</span>=<span class="value">"frm"</span> <span class="attribute">method</span>=<span class="value">"post"</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="title">c:if</span> <span class="attribute">test</span>=<span class="value">"${billList!=null&&billList.size()&gt;0}"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">table</span> <span class="attribute">width</span>=<span class="value">"100%"</span> <span class="attribute">class</span>=<span class="value">"table table-condensed table-striped dataTable table-bordered table-hover"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="title">thead</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="title">tr</span> <span class="attribute">style</span>=<span class="value">"background: #d7e6ea"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="title">th</span> <span class="attribute">scope</span>=<span class="value">"col"</span> <span class="attribute">width</span>=<span class="value">"10%"</span> &gt;</span>序号<span class="tag">&lt;/<span class="title">th</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="title">th</span> <span class="attribute">scope</span>=<span class="value">"col"</span> <span class="attribute">width</span>=<span class="value">"15%"</span>&gt;</span>账务类型<span class="tag">&lt;/<span class="title">th</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="title">th</span> <span class="attribute">scope</span>=<span class="value">"col"</span> <span class="attribute">width</span>=<span class="value">"15%"</span>&gt;</span>资金数额<span class="tag">&lt;/<span class="title">th</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="title">th</span> <span class="attribute">scope</span>=<span class="value">"col"</span> <span class="attribute">width</span>=<span class="value">"15%"</span>&gt;</span>日期<span class="tag">&lt;/<span class="title">th</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="title">th</span> <span class="attribute">scope</span>=<span class="value">"col"</span> <span class="attribute">width</span>=<span class="value">"20%"</span>&gt;</span>备注<span class="tag">&lt;/<span class="title">th</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="title">th</span> <span class="attribute">scope</span>=<span class="value">"col"</span> <span class="attribute">width</span>=<span class="value">"10%"</span>&gt;</span>删除<span class="tag">&lt;/<span class="title">th</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="title">th</span> <span class="attribute">scope</span>=<span class="value">"col"</span> <span class="attribute">width</span>=<span class="value">"10%"</span>&gt;</span>修改<span class="tag">&lt;/<span class="title">th</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="title">tr</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="title">thead</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="title">tbody</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="title">c:forEach</span> <span class="attribute">items</span>=<span class="value">"${billList}"</span> <span class="attribute">var</span>=<span class="value">"li"</span> <span class="attribute">varStatus</span>=<span class="value">"status"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="title">tr</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="title">td</span>&gt;</span>${status.index+1}<span class="tag">&lt;/<span class="title">td</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="title">td</span>&gt;</span>${li.billStyle}<span class="tag">&lt;/<span class="title">td</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="title">td</span>&gt;</span>${li.billMoney}<span class="tag">&lt;/<span class="title">td</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="title">td</span>&gt;</span>${li.billCraetedTime}<span class="tag">&lt;/<span class="title">td</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="title">td</span>&gt;</span>${li.billMemo}<span class="tag">&lt;/<span class="title">td</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">id</span>=<span class="value">"del"</span> <span class="attribute">class</span>=<span class="value">"btn btn-default btn-xs "</span> <span class="attribute">role</span>=<span class="value">"button"</span> <span class="attribute">href</span>=<span class="value">"&lt;c:url value="</span>/<span class="attribute">bill</span>/<span class="attribute">billDel.action</span>?<span class="attribute">billId</span>=<span class="value">${li.billId}"</span>/&gt;</span>" onclick="return delBill()"&gt;删&nbsp;&nbsp;除<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">td</span>&gt;</span> <span class="tag">&lt;/<span class="title">tr</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="title">c:forEach</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="title">tbody</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="title">table</span>&gt;</span></div><div class="line">           <span class="tag">&lt;/<span class="title">c:if</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="title">c:if</span> <span class="attribute">test</span>=<span class="value">"${billList==null||billList.size()==0}"</span>&gt;</span></div><div class="line">               <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"position: relative;top:100px;text-align: center"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="title">p</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">style</span>=<span class="value">"font-size:50px;text-decoration: none;text-shadow: 0 3px 3px #FFF;color: #707781; font-size: 32pt; font-weight: bold; line-height: 25px; margin-bottom: 0;"</span>&gt;</span>你目前还没有账单信息哦&nbsp;&nbsp;&nbsp;O__O"…<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="title">p</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">style</span>=<span class="value">"font-size:25px;text-shadow: 0 3px 3px #FFF;color: #64818E; font-size: 15pt; font-weight: normal;"</span> <span class="attribute">href</span>=<span class="value">"&lt;%=path%&gt;/jsp/add.jsp"</span>&gt;</span>现在去添加<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span></div><div class="line">               <span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">           <span class="tag">&lt;/<span class="title">c:if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="title">form</span>&gt;</span></div></pre></td></tr></table></figure>

<p>ajax和图表（jQuery图表插件-jQplot）生成（摘录）：</p>
<figure class="highlight {bash}"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajaxChartMemo</span><span class="params">()</span></span>{</div><div class="line">    $.ajax({</div><div class="line">        url:<span class="string">'/pf/bill/billStatisByMemo.action'</span>,</div><div class="line">        dataType:<span class="string">'json'</span>,</div><div class="line">        error:<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">            alert(<span class="string">"error"</span>);</div><div class="line">        },</div><div class="line">        success:<span class="function"><span class="keyword">function</span><span class="params">(data)</span></span>{</div><div class="line">            chartData = [];</div><div class="line">            <span class="built_in">console</span>.log(data);</div><div class="line">            $.each(data,<span class="function"><span class="keyword">function</span><span class="params">(index)</span></span>{</div><div class="line">                item=[];</div><div class="line">                item.push(data[index].billMemo);</div><div class="line">                item.push(data[index].cnt);</div><div class="line">                chartData.push(item);</div><div class="line">            });</div><div class="line">            createChartMemo(chartData);</div><div class="line">        }</div><div class="line">    });</div><div class="line">}</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createChartMemo</span><span class="params">(data)</span></span>{</div><div class="line">    <span class="keyword">var</span> plot1 = jQuery.jqplot (<span class="string">'chart3'</span>, [data],</div><div class="line">        {</div><div class="line">            title:<span class="string">'根据用途的账单百分比统计图'</span>,</div><div class="line">            seriesDefaults: {</div><div class="line">                <span class="comment">// Make this a pie chart.</span></div><div class="line">                renderer: jQuery.jqplot.PieRenderer,</div><div class="line">                rendererOptions: {</div><div class="line">                    <span class="comment">// Put data labels on the pie slices.</span></div><div class="line">                    <span class="comment">// By default, labels show the percentage of the slice.</span></div><div class="line">                    showDataLabels: <span class="literal">true</span></div><div class="line">                }</div><div class="line">            },</div><div class="line">            legend: { show:<span class="literal">true</span>, location: <span class="string">'e'</span> }</div><div class="line">        }</div><div class="line">    );</div><div class="line">}</div></pre></td></tr></table></figure>

<p>还有很多好用的插件啦其实，像datepicker、验证表单及时提示错误消息那个插件（想不起名字，乃们不要怪我T_T）、uploadify（用于上传文件、图片那些）等等<br>这些都是做项目的神器呐，好了偷了个懒，就写到这吧，好困~</p>
  
	</div>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/总结/">总结</a><a href="/tags/stackoverflow/">stackoverflow</a><a href="/tags/Node-js/">Node.js</a><a href="/tags/AngularJS/">AngularJS</a><a href="/tags/MongoDB/">MongoDB</a><a href="/tags/jQuery插件/">jQuery插件</a>
  </div>


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Summary/">Summary</a>
</div>



<div class="article-share" id="share">

  <div data-url="http://snailsky.me/2014/10/02/项目总结温故知新-web前端类/" data-title="项目总结温故知新 - web前端类 | Running_snail&#39;s Blog" data-tsina="1649298213" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/02/10/Canvas绘图之旅/" title="Canvas绘图之旅">
  <strong>PREVIOUS:</strong><br/>
  <span>
  Canvas绘图之旅</span>
</a>
</div>


<div class="next">
<a href="/2014/09/30/Yeoman-现代wepapp的脚手架-Getting-started/"  title="Yeoman - 现代wepapp的脚手架(Getting started)">
 <strong>NEXT:</strong><br/> 
 <span>Yeoman - 现代wepapp的脚手架(Getting started)
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#可视化编辑器"><span class="toc-number">1.</span> <span class="toc-text">可视化编辑器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#为什么用Node？"><span class="toc-number">1.1.</span> <span class="toc-text">为什么用Node？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动项目"><span class="toc-number">1.2.</span> <span class="toc-text">启动项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用MongoDB(mongoose)存储"><span class="toc-number">1.3.</span> <span class="toc-text">使用MongoDB(mongoose)存储</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Angular的视图、控制器和指令。"><span class="toc-number">1.4.</span> <span class="toc-text">Angular的视图、控制器和指令。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iframe子页面用了jQuery来做DOM操作"><span class="toc-number">1.5.</span> <span class="toc-text">iframe子页面用了jQuery来做DOM操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模块化的写法"><span class="toc-number">1.6.</span> <span class="toc-text">模块化的写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关于拖拽"><span class="toc-number">1.7.</span> <span class="toc-text">关于拖拽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#打包压缩怎么做？"><span class="toc-number">1.8.</span> <span class="toc-text">打包压缩怎么做？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他"><span class="toc-number">1.9.</span> <span class="toc-text">其他</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参与某移动web框架的开发"><span class="toc-number">2.</span> <span class="toc-text">参与某移动web框架的开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#滚动焦点图"><span class="toc-number">2.1.</span> <span class="toc-text">滚动焦点图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#标题下拉框"><span class="toc-number">2.2.</span> <span class="toc-text">标题下拉框</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#加载中动画"><span class="toc-number">2.3.</span> <span class="toc-text">加载中动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#柱形图"><span class="toc-number">2.4.</span> <span class="toc-text">柱形图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java_web系列项目小结"><span class="toc-number">3.</span> <span class="toc-text">Java web系列项目小结</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
			<li><a href="/categories/CSS/" title="CSS">CSS<sup>5</sup></a></li>
		
			<li><a href="/categories/HTML5/" title="HTML5">HTML5<sup>1</sup></a></li>
		
			<li><a href="/categories/JavaScript/" title="JavaScript">JavaScript<sup>6</sup></a></li>
		
			<li><a href="/categories/Life/" title="Life">Life<sup>2</sup></a></li>
		
			<li><a href="/categories/MongoDB/" title="MongoDB">MongoDB<sup>1</sup></a></li>
		
			<li><a href="/categories/Node-js/" title="Node.js">Node.js<sup>2</sup></a></li>
		
			<li><a href="/categories/Summary/" title="Summary">Summary<sup>1</sup></a></li>
		
		</ul>
</div>


  
  <div class="archiveslist">
    <p class="asidetitle"><a href="/archives">归档</a></p>
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a><span class="archive-list-count">2</span></li></ul>
  </div>




  
  <div class="tagcloudlist">
    <p class="asidetitle">标签云</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/AngularJS/" style="font-size: 10.00px;">AngularJS</a><a href="/tags/CSS/" style="font-size: 16.67px;">CSS</a><a href="/tags/HTML5/" style="font-size: 10.00px;">HTML5</a><a href="/tags/JavaScript/" style="font-size: 20.00px;">JavaScript</a><a href="/tags/MongoDB/" style="font-size: 11.67px;">MongoDB</a><a href="/tags/Node-js/" style="font-size: 13.33px;">Node.js</a><a href="/tags/grunt/" style="font-size: 10.00px;">grunt</a><a href="/tags/jQuery插件/" style="font-size: 10.00px;">jQuery插件</a><a href="/tags/stackoverflow/" style="font-size: 15.00px;">stackoverflow</a><a href="/tags/yeoman/" style="font-size: 10.00px;">yeoman</a><a href="/tags/书/" style="font-size: 11.67px;">书</a><a href="/tags/区别/" style="font-size: 10.00px;">区别</a><a href="/tags/原理/" style="font-size: 13.33px;">原理</a><a href="/tags/学习生活/" style="font-size: 10.00px;">学习生活</a><a href="/tags/安装/" style="font-size: 11.67px;">安装</a><a href="/tags/实践/" style="font-size: 20.00px;">实践</a><a href="/tags/性能优化/" style="font-size: 10.00px;">性能优化</a><a href="/tags/总结/" style="font-size: 15.00px;">总结</a><a href="/tags/技巧/" style="font-size: 10.00px;">技巧</a><a href="/tags/新手教程/" style="font-size: 11.67px;">新手教程</a><a href="/tags/日记/" style="font-size: 11.67px;">日记</a><a href="/tags/生活/" style="font-size: 10.00px;">生活</a><a href="/tags/笔记/" style="font-size: 18.33px;">笔记</a><a href="/tags/跨浏览器/" style="font-size: 10.00px;">跨浏览器</a><a href="/tags/选择器/" style="font-size: 10.00px;">选择器</a>
    </div>
  </div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/AngularJS/" title="AngularJS">AngularJS<sup>1</sup></a></li>
		
			<li><a href="/tags/CSS/" title="CSS">CSS<sup>5</sup></a></li>
		
			<li><a href="/tags/HTML5/" title="HTML5">HTML5<sup>1</sup></a></li>
		
			<li><a href="/tags/JavaScript/" title="JavaScript">JavaScript<sup>7</sup></a></li>
		
			<li><a href="/tags/MongoDB/" title="MongoDB">MongoDB<sup>2</sup></a></li>
		
			<li><a href="/tags/Node-js/" title="Node.js">Node.js<sup>3</sup></a></li>
		
			<li><a href="/tags/grunt/" title="grunt">grunt<sup>1</sup></a></li>
		
			<li><a href="/tags/jQuery插件/" title="jQuery插件">jQuery插件<sup>1</sup></a></li>
		
			<li><a href="/tags/stackoverflow/" title="stackoverflow">stackoverflow<sup>4</sup></a></li>
		
			<li><a href="/tags/yeoman/" title="yeoman">yeoman<sup>1</sup></a></li>
		
			<li><a href="/tags/书/" title="书">书<sup>2</sup></a></li>
		
			<li><a href="/tags/区别/" title="区别">区别<sup>1</sup></a></li>
		
			<li><a href="/tags/原理/" title="原理">原理<sup>3</sup></a></li>
		
			<li><a href="/tags/学习生活/" title="学习生活">学习生活<sup>1</sup></a></li>
		
			<li><a href="/tags/安装/" title="安装">安装<sup>2</sup></a></li>
		
			<li><a href="/tags/实践/" title="实践">实践<sup>7</sup></a></li>
		
			<li><a href="/tags/性能优化/" title="性能优化">性能优化<sup>1</sup></a></li>
		
			<li><a href="/tags/总结/" title="总结">总结<sup>4</sup></a></li>
		
			<li><a href="/tags/技巧/" title="技巧">技巧<sup>1</sup></a></li>
		
			<li><a href="/tags/新手教程/" title="新手教程">新手教程<sup>2</sup></a></li>
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
      <li><a href="http://www.linkgod.net/" target="_blank" title="YangJian">linkgod's note of life</a></li>
      <li><a href="http://fluyy.net/" target="_blank" title="YangJian">Fluyy's Blog</a></li>
      <li><a href="http://plusplus7.com/" target="_blank" title="Hexo">plusplus7's Blog</a></li>
      <li><a href="http://blog.fens.me/" target="_blank" title="Hexo">粉丝日志</a></li>
    </ul>
</div>

  <div class="rsspart">
	<a href="http://snailsky.me/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello, I&#39;m a girl who love the Front-End. <br/>
			It requires hard work to give off an appearance of effortlessness. </p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/1649298213" target="_blank" title="weibo"></a>
		
		
		<a href="https://twitter.com/running_snail1" target="_blank" title="twitter"></a>
		
		
		<a href="https://github.com/gyj963" target="_blank" title="github"></a>
		
		
	</div>
		<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2015 
		
		<a href="http://snailsky.me" target="_blank" title="running_snail">running_snail</a>
		
		</p>
</div>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-51312198-1', 'snailsky.me');
    ga('send', 'pageview');

</script>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>


<script type="text/javascript">
  var duoshuoQuery = {short_name:"snailskyme"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 




<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-51312198-1', 'snailsky.me');  
ga('send', 'pageview');
</script>


  </body>
</html>
